!function(y){y(document).ready(function(){var a,i,t=y(window).width(),e=y(".bandeau-header"),s=("oui"===localStorage.getItem("lapeyre_masquer_bandeau")?y(e).hide():y("#fermer-bandeau").click(function(){y(e).slideUp(),localStorage.setItem("lapeyre_masquer_bandeau","oui")}),0),d=y(".site-header"),r=y(d).outerHeight();let n=document.documentElement;n.style.setProperty("--hauteur-header",r+"px"),y(window).scroll(function(){var t=y(this).scrollTop();t<r?y("body").removeClass("js-sticky-header"):5<=Math.abs(s-t)&&(s<t?("true"===y(o).attr("aria-expanded")&&c(),y("body").removeClass("js-sticky-header")):y("body").addClass("js-sticky-header"),s=t)}),t<768&&(a=y(".sitemap .toggle-col"),i=y(".sitemap .col"),y(a).attr("aria-expanded","false"),y(i).slideUp(),0<a.length)&&a.click(function(t){var e=y("#"+y(this).attr("aria-controls"));"true"===y(this).attr("aria-expanded")?(y(this).attr("aria-expanded","false"),y(e).slideUp()):(y(a).attr("aria-expanded","false"),y(i).slideUp(),y(this).attr("aria-expanded","true"),y(e).slideDown())});var o=y("#ouvrir-produits-desktop"),l=y("#menu-produits-desktop"),u=y("#overlay-produits "),t=y("#menu-produits-desktop button.produit");function c(){y(l).fadeOut(),y(o).attr("aria-expanded","false"),y(u).hide(),y(o).focus()}y(o).on("click mouseover",function(){y(this).attr("aria-expanded","true"),y(l).fadeIn(),y(u).show(),y("#menu-produits-desktop .niv1, #menu-produits-desktop .niv2").removeClass("actif"),y("#menu-produits-desktop .niveau-2, #menu-produits-desktop .niveau-3").removeClass("actif"),y("#menu-produits-desktop .niv1:first-of-type").addClass("actif"),y("#fermer-produits-desktop").focus();var t=y("#menu-produits-desktop .niveau-2:first-of-type");y(t).addClass("actif"),y(t).find(".niveau-3:first-of-type").addClass("actif"),y(t).find(".niv2:first-of-type").addClass("actif")}),y("#fermer-produits-desktop").click(function(){c()}),y(u).click(function(){c()}),y(t).click(function(){var t,e=y("#"+y(this).attr("aria-controls"));y(this).hasClass("niv1")?(y("#menu-produits-desktop .niv1, #menu-produits-desktop .niv2").removeClass("actif"),y("#menu-produits-desktop .niveau-2, #menu-produits-desktop .niveau-3").removeClass("actif"),t=y(e).find("button:first-of-type"),y(t).addClass("actif"),t=y("#"+y(t).attr("aria-controls")),y(t).addClass("actif")):(y("#menu-produits-desktop .niv2").removeClass("actif"),y("#menu-produits-desktop .niveau-3").removeClass("actif")),y(this).addClass("actif"),y(e).addClass("actif")});var f=y("#volet-ouvrir"),p=y("#volet-navigation"),h=y("#overlay-mobile"),v=y("#ouvrir-produits-mobile"),m=y("#menu-produits-mobile");function C(){y(m).removeClass("actif"),y(m).find(".niveau").removeClass("actif"),y(v).attr("aria-expanded","false"),y(v).focus()}function k(){y("#volet-navigation").removeClass("toggled"),y(o).attr("aria-expanded","false"),y(h).removeClass("actif"),C(),y("body").css("overflow","unset"),y(f).focus()}y(f).on("click",function(){y(this).attr("aria-expanded","true"),y(p).addClass("toggled"),y(h).addClass("actif"),y("body").css("overflow","hidden"),y(".menu-mobile").children("a:first-of-type").focus()}),y(v).on("click",function(){y(this).attr("aria-expanded","true"),y(m).addClass("actif"),y(m).find(".niveau-1").addClass("actif"),y(".niveau-1").children("button:first-of-type").focus()}),y(".fermer-panneau").click(function(){var t=y(this).parent(".top-menu").parent(".niveau");y(t).removeClass("actif"),y(t).hasClass("niveau-1")?C():y(t).hasClass("niveau-2")?y(".niveau-1").children("button:first-of-type").focus():y(t).hasClass("niveau-3")&&y(".niveau-2.actif").children("button:first-of-type").focus()}),y(".fermer-menu").click(function(){k()}),y(h).click(function(){k()}),y("#menu-produits-mobile button.produit").click(function(){var t=y("#"+y(this).attr("aria-controls"));y(t).addClass("actif"),(y(t).hasClass("niveau-2")?y(t).children("button:first-of-type"):y(t).find(".liste-produits a:first-of-type")).focus()}),y(document).on("keydown",function(t){"Escape"==t.key&&(y(".menu-produits.mobile").hasClass("actif")?C():y(".volet-navigation").hasClass("toggled")?k():"true"===y(o).attr("aria-expanded")&&c())});var b=y(".slider-wrap");function g(){b.length<=0||y(b).each(function(){var t=y(this).find(".slide"),e=t.length;y(t).outerWidth()*e+20*(e-1)<=y(this).outerWidth()?(y(this).find(".nav-slider").hide(),y(this).find(".slider").css("left",0),y(this).find(".slider-drag").css("left",0),y(this).find(".slider-univers").addClass("js-center")):(y(this).find(".nav-slider").show(),y(this).find(".slider-univers").removeClass("js-center"))})}g();t=y(".fleche-slider"),0<t.length&&t.click(function(t){var e=y(this).parents(".slider-wrap"),a=y(e).find(".slider"),i=y(e).find(".gauche"),s=y(e).find(".droite"),d=y(e).find(".dot"),r=parseInt(y(e).attr("data-active"))+parseInt(y(this).attr("data-direction")),n=y(a).find(".slide").outerWidth()+20,o=parseInt(e.attr("data-total"))-1;0<=r&&r<=o&&(a.css("left",-1*r*n),e.attr("data-active",r),y(d).removeClass("active"),y(e).find('.dot[data-target="'+r+'"]').addClass("active")),0==r?(y(i).attr("disabled",!0),y(s).attr("disabled",!1)):r==o?(y(i).attr("disabled",!1),y(s).attr("disabled",!0)):(y(i).attr("disabled",!1),y(s).attr("disabled",!1))}),t=y(".slider-wrap .dot"),0<t.length&&t.click(function(t){var e=y(this).parents(".slider-wrap"),a=y(e).find(".slider"),i=y(e).find(".gauche"),s=y(e).find(".droite"),d=y(e).find(".dot"),r=y(this).attr("data-target"),n=y(a).find(".slide").outerWidth()+20,o=parseInt(e.attr("data-total"))-1;0<=r&&r<=o&&(a.css("left",-1*r*n),e.attr("data-active",r),y(d).removeClass("active"),y(e).find('.dot[data-target="slide-'+r+'"]').addClass("active")),0==r?(y(i).attr("disabled",!0),y(s).attr("disabled",!1)):r==o?(y(i).attr("disabled",!1),y(s).attr("disabled",!0)):(y(i).attr("disabled",!1),y(s).attr("disabled",!1))}),t=y(".nav-page-type .slider-wrap");0<t.length&&y(t).each(function(){3==y(this).attr("data-total")&&(y(this).find(".dot:nth-child(2)").trigger("click"),y(this).find(".dot:nth-child(2)").addClass("active"))}),window.onresize=function(){768<window.innerWidth?y(".sitemap .col").show():y(".sitemap .col").each(function(){var t=y(this).siblings(".toggle-col");"false"===y(t).attr("aria-expanded")&&y(this).slideUp()}),r=y(d).outerHeight(),n.style.setProperty("--hauteur-header",r+"px"),g()}})}(jQuery);